<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui"
                template="./../resources/main.xhtml">

    <ui:define name="tarefas">
    
    <p:growl id="msg" rendered="#{param.erro}">#{msgs.erro_message}</p:growl>
    
     <p:dialog header="Consultar Planos"
                  id="dialog"  
                  modal="false"
                  minWidth="1065"
                  width="1065"
                  closable="true"
                  position="center"
                  widgetVar="modalLogin"
                  draggable="true"
                  resizable="false"
                  visible="true"
                  maximizable="false"
                  footer="Teclas [F2-Salvar] [F12 Cancelar]">

        <br/>
        <p:separator/>
        <h:form id="formtable">
            <p:growl id="msg0"/>

            <p:dataTable id="idTabela" var="plano" value="#{mbPlano.planos}"
                         paginator="true" rows="6" emptyMessage="Nenhum registro encontrado"
                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink}
                         {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         rowsPerPageTemplate="5,10,15"
                         style="width: 100%; alignment-adjust: middle" >

                <f:facet name="header">Lista de PLanos</f:facet>
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Nome"/>
                    </f:facet>
                    <h:outputText value="#{plano.nomePlano}"/>
                </p:column>
                
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Data Vencimento"/>
                    </f:facet>
                    <h:outputText value="Dia: #{plano.diaVencimento}"/>
                </p:column>
                
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Gera Boleto"/>
                    </f:facet>
                    <h:outputText value="#{plano.geraBoleto==1?'SIM':'NÃO'}"/>
                </p:column>
                
                 <p:column>
                    <f:facet name="header">
                        <h:outputText value="Nota fiscal?"/>
                    </f:facet>
                    <h:outputText value="#{plano.notaFiscal==1?'SIM':'NÃO'}"/>
                </p:column>

                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Ações"/>
                    </f:facet>
                   <p:commandButton action="#{mbPlano.editPlano}"
                        value="Editar" image="ui-icon ui-icon-pencil"
                        update="@form" ajax="false">
                        <f:setPropertyActionListener value="#{plano}" target="#{mbPlano.plano}"/>
                    <f:setPropertyActionListener value="#{plano.idPlano}" target="#{plano.idPlano}"/>
                    <f:setPropertyActionListener value="#{plano.nomePlano}" target="#{plano.nomePlano}"/>
                    </p:commandButton>
                    
                    
                    <p:commandButton value="Remover" action="#{mbPlano.deletePlano}"
                                     image="ui-icon ui-icon-close" update=":formtable">
                        <f:setPropertyActionListener target="#{mbPlano.plano}"
                                                     value="#{plano}"/>
                    </p:commandButton>
                </p:column>

            </p:dataTable>

           <h:form id="impressao">
                    
                    <a href="../ExecutaRelatorioCadastroPlano" target="blank">
                        <img src = "../resources/css/imagens/icone_pdf.png" height="64" width="64"></img></a>
                                                                   
                        </h:form>
                        <h:messages /> 
                
            </h:form>
        </p:dialog>  
    
    
    </ui:define>

</ui:composition>
